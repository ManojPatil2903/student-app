pipeline{
    agent any

    parameters {
        string(name: 'APP_VERSION', description: 'Enter the application version to be built', defaultValue: '1.0.0')
    }
    stages{
        stage('Checkout Code From GIT') {
            steps {
                          
               git branch: 'main', url: 'https://github.com/ManojPatil2903/student-app.git'

               sh '''
               echo "Code Checkout Completed"

               '''
            }
        } 

        stage('Build MVN Application'){
            steps{
                sh '''
                echo "Maven Build Started"
                mvn clean install
                echo "Maven Build Completed"
                '''
            }
        }

        stage('Executing test cases') {
            steps {
                sh '''
                echo "Test Cases Execution Started"
                mvn test
                echo "Test Cases Execution Completed"
                '''
            }
        }

        stage('Acceptance Testing') {
            steps {
                input 'Proceed with Acceptance Testing?'
                sh '''
                
                echo "Acceptance Testing Started"
                mvn verify
                echo "Acceptance Testing Completed"
                '''
            }
        }

        stage('Building docker image'){

            steps{
                sh '''
                echo "Docker Image Build Started"
                docker build -t student-app:${APP_VERSION} .
                echo "Docker Image Build Completed"
                '''
            }
        }

        
        

         

    }




}